<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Chess Teams
			{% endblock %}
		</title>

		{{ importmap('app') }}

		{# Google Fonts pour NeoChess Framework #}
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		{# NeoChess CSS Framework #}
		{% block stylesheets %}
			<link rel="stylesheet" href="{{ asset('styles/neo-chess-framework.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/neo-components.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/neo-utilities.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/neo-responsive.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/vendor/chessground.css') }}">
			<link rel="stylesheet" href="{{ asset('styles/app.css') }}">
			{% block styles %}{% endblock %}
		{% endblock %}
	</head>

	<body>
		<!-- Header avec design NeoChess -->
		<div class="neo-container">
			<header class="neo-header neo-mb-xl">
				<div>
					<h1 class="neo-header-title">
						<a href="{{ path('app_home') }}" class="neo-text-primary" style="text-decoration: none;">
							Chess Teams
						</a>
					</h1>
					<span class="neo-header-info">Jeu d'√©checs en √©quipe</span>
				</div>
			</header>


			<!-- Main Content -->
			<main> 
				{% block body %}{% endblock %}
			</main>
		</div>

		<!-- Messages Flash Flottants -->
		<div id="neo-flash-container" class="neo-flash-container">
			{% for label, messages in app.flashes %}
				{% for message in messages %}
					<div class="neo-flash neo-flash-{{ label == 'error' or label == 'danger' ? 'error' : (label == 'success' ? 'success' : (label == 'warning' ? 'warning' : 'info')) }} neo-flash-show" data-flash-type="{{ label }}">
						<div class="neo-flash-content">
							<div class="neo-flash-icon">
								{% if label == 'success' %}
									‚úÖ
								{% elseif label == 'error' or label == 'danger' %}
									‚ùå
								{% elseif label == 'warning' %}
									‚ö†Ô∏è
								{% else %}
									‚ÑπÔ∏è
								{% endif %}
							</div>
							<div class="neo-flash-message">
								{{ message }}
							</div>
							<button class="neo-flash-close" onclick="this.parentElement.parentElement.remove()">
								√ó
							</button>
						</div>
					</div>
				{% endfor %}
			{% endfor %}
		</div>

			{# JavaScript NeoChess Framework #}
			{% block javascripts %}
				<script>
					document.addEventListener('DOMContentLoaded', function () {
						// NeoChess Framework JavaScript helpers
						console.log('üéØ NeoChess Framework charg√© - Chess Teams');
						
						// Gestion des messages flash flottants
						const flashMessages = document.querySelectorAll('.neo-flash');
						
						// Animation d'entr√©e pour les messages flash
						flashMessages.forEach((flash, index) => {
							// D√©lai progressif pour l'affichage des messages multiples
							setTimeout(() => {
								flash.classList.add('neo-flash-visible');
							}, index * 100);
							
							// Auto-hide apr√®s 5 secondes
							setTimeout(() => {
								hideFlashMessage(flash);
							}, 5000 + (index * 100));
						});
						
						// Fonction pour masquer un message flash
						function hideFlashMessage(flash) {
							flash.classList.remove('neo-flash-visible');
							flash.classList.add('neo-flash-hide');
							
							setTimeout(() => {
								if (flash.parentElement) {
									flash.remove();
								}
							}, 300);
						}
						
						// Fonction globale pour ajouter des messages flash via JavaScript
						window.addFlashMessage = function(type, message) {
							const container = document.getElementById('neo-flash-container');
							if (!container) return;
							
							const icons = {
								success: '‚úÖ',
								error: '‚ùå',
								warning: '‚ö†Ô∏è',
								info: '‚ÑπÔ∏è'
							};
							
							const flashElement = document.createElement('div');
							flashElement.className = `neo-flash neo-flash-${type} neo-flash-show`;
							flashElement.innerHTML = `
								<div class="neo-flash-content">
									<div class="neo-flash-icon">${icons[type] || '‚ÑπÔ∏è'}</div>
									<div class="neo-flash-message">${message}</div>
									<button class="neo-flash-close" onclick="this.parentElement.parentElement.remove()">√ó</button>
								</div>
							`;
							
							container.appendChild(flashElement);
							
							// Animation d'entr√©e
							setTimeout(() => {
								flashElement.classList.add('neo-flash-visible');
							}, 50);
							
							// Auto-hide apr√®s 5 secondes
							setTimeout(() => {
								hideFlashMessage(flashElement);
							}, 5000);
						};
					});
				</script>
			{% endblock %}
		</body>
	</html>
