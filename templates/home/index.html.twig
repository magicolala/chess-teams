{% extends 'base.html.twig' %}

{% block title %}Accueil – Chess Teams
{% endblock %}

{% block body %}
	<div class="neo-animate-fadeIn">
		<!-- Hero Section -->
		<div class="neo-text-center neo-mb-2xl">
			<h2 class="neo-text-3xl neo-font-bold neo-text-primary neo-mb-md">
				🏆 Chess Teams
			</h2>
			<p class="neo-text-lg neo-text-secondary neo-mb-xl">
				Jouez aux échecs en équipe avec vos amis
			</p>
		</div>


		<!-- Main Actions Grid -->
		<div class="neo-grid neo-grid-2 neo-gap-xl neo-mb-2xl">
			<!-- Créer une partie -->
			<div class="neo-card neo-animate-slideIn">
				<div class="neo-card-header">
					<h3 class="neo-card-title">➕ Créer une partie</h3>
				</div>
				<div class="neo-card-content">
					<p class="neo-text-secondary neo-mb-lg">
						Lancez une nouvelle partie et invitez vos amis à rejoindre votre équipe
					</p>
					<form method="post" action="{{ path('app_game_create_form') }}">
						<div class="neo-form-group">
							<label class="neo-label" for="turnDuration">
								⏱️ Durée par tour (secondes)
							</label>
							<input type="number" id="turnDuration" name="turnDuration" value="60" min="10" max="600" class="neo-input">
							<div class="neo-form-help">Choisissez entre 10 et 600 secondes</div>
						</div>

						<div class="neo-form-group">
							<label class="neo-label" for="visibility">
								👁️ Visibilité de la partie
							</label>
							<select id="visibility" name="visibility" class="neo-select">
								<option value="private" selected>Partie privée (sur invitation)</option>
								<option value="public">Partie publique</option>
							</select>
						</div>

						<div class="neo-form-group">
							<label class="neo-label">🧩 Mode de jeu</label>
							<div class="neo-flex neo-items-center neo-gap-sm">
								<label class="neo-toggle">
									<input type="checkbox" id="werewolfMode" name="werewolfMode">
									<span class="neo-toggle-slider"></span>
								</label>
								<span class="neo-text-sm">Activer le mode Loup-Garou</span>
							</div>
							<div class="neo-form-help">Si activé, les rôles seront assignés au démarrage de la partie.</div>
						</div>

						<div class="neo-form-group" id="twoWolvesGroup" style="display:none;">
							<div class="neo-flex neo-items-center neo-gap-sm">
								<label class="neo-toggle">
									<input type="checkbox" id="twoWolvesPerTeams" name="twoWolvesPerTeams">
									<span class="neo-toggle-slider"></span>
								</label>
								<span class="neo-text-sm">Un loup par équipe</span>
							</div>
							<div class="neo-form-help">Recommandé pour ≥ 6 joueurs (équilibrage).</div>
						</div>

						<button type="submit" class="neo-btn neo-btn-primary neo-btn-full neo-animate-pulse">
							🚀 Créer ma partie
						</button>
					</form>
				</div>
			</div>

			<!-- Rejoindre une partie -->
			<div class="neo-card neo-animate-slideIn neo-delay-100">
				<div class="neo-card-header">
					<h3 class="neo-card-title">🚪 Rejoindre une partie</h3>
				</div>
				<div class="neo-card-content">
					<p class="neo-text-secondary neo-mb-lg">
						Entrez le code d'invitation que vous avez reçu pour rejoindre une partie
					</p>
					<form method="get" action="{{ path('app_game_show_page') }}">
						<div class="neo-form-group">
							<label class="neo-label" for="invitationCode">
								🔑 Code d'invitation
							</label>
							<input type="text" id="invitationCode" name="code" placeholder="Ex: CHESS123" required class="neo-input" style="text-transform: uppercase;">
							<div class="neo-form-help">Saisissez le code partagé par l'hôte</div>
						</div>

						<button type="submit" class="neo-btn neo-btn-success neo-btn-full neo-animate-bounce">
							👥 Rejoindre la partie
						</button>
					</form>
				</div>
			</div>
		</div>

		<!-- Public games list -->
		<div class="neo-card neo-animate-fadeIn neo-mb-2xl">
			<div class="neo-card-header">
				<h3 class="neo-card-title">🌍 Parties publiques récentes</h3>
			</div>
			<div class="neo-card-content">
				{% if publicGames is defined and publicGames|length > 0 %}
					<ul class="neo-list neo-divide">
						{% for game in publicGames %}
							<li class="neo-flex neo-justify-between neo-items-center neo-py-sm">
								<div class="neo-text-sm neo-text-secondary">
									<span class="neo-badge">{{ game.status|upper }}</span>
									· Créée le {{ game.createdAt|date('d/m/Y H:i') }} · ⏱️ {{ game.turnDurationSec }}s
								</div>
								<a class="neo-btn neo-btn-link" href="{{ path('app_game_show_page', { id: game.id }) }}">Ouvrir</a>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					<p class="neo-text-secondary">Aucune partie publique pour le moment. Créez-en une !</p>
				{% endif %}
			</div>
		</div>

		<!-- Section informative -->
		<div class="neo-card neo-bg-info neo-animate-fadeIn neo-delay-200">
			<div class="neo-card-header">
				<h3 class="neo-card-title neo-text-info">ℹ️ Comment ça marche ?</h3>
			</div>
			<div class="neo-card-content">
				<div class="neo-grid neo-grid-3 neo-gap-lg">
					<div class="neo-text-center">
						<div class="neo-text-4xl neo-mb-md">👥</div>
						<h4 class="neo-text-lg neo-font-semibold neo-mb-sm">Formez vos équipes</h4>
						<p class="neo-text-secondary neo-text-sm">Rejoignez l'équipe A ou B avec vos amis</p>
					</div>
					<div class="neo-text-center">
						<div class="neo-text-4xl neo-mb-md">⏰</div>
						<h4 class="neo-text-lg neo-font-semibold neo-mb-sm">Jouez chacun votre tour</h4>
						<p class="neo-text-secondary neo-text-sm">Chaque membre joue à tour de rôle</p>
					</div>
					<div class="neo-text-center">
						<div class="neo-text-4xl neo-mb-md">🏆</div>
						<h4 class="neo-text-lg neo-font-semibold neo-mb-sm">Gagnez ensemble</h4>
						<p class="neo-text-secondary neo-text-sm">La victoire appartient à toute l'équipe</p>
					</div>
				</div>
			</div>
		</div>
	</div>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const werewolf = document.getElementById('werewolfMode');
  const group = document.getElementById('twoWolvesGroup');
  if (!werewolf || !group) return;
  const refresh = () => { group.style.display = werewolf.checked ? '' : 'none'; };
  werewolf.addEventListener('change', refresh);
  refresh();
});
</script>
{% endblock %}
